<!DOCTYPE html>
<html lang=ko>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="naver-site-verification" content="29892ce904ec6054137e0bb84d2f2197d1eb56f4" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>SQL | 테이블 생성, 제약조건, 뷰 | jonghwanyoon</title><meta name="robots" content="noindex">
  <meta name="description" content="SQL에서 사용되는 테이블 생성, 제약조건, 뷰에 대해 정리하는 글입니다.  목차  데이터베이스와 SQL SQL 미리 맛보기 SQL 기본 문법 SQL 고급 문법 테이블과 뷰 ⬅ 테이블 생성, 제약조건, 뷰 인덱스 스토어드 프로시져 SQL과 파이썬 연결    테이블 생성 테이블 생성하는 과정을 실습해보겠습니다. 우선 구조를 구상하는 것이 먼저이고, data">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL | 테이블 생성, 제약조건, 뷰">
<meta property="og:url" content="https://jonghwanyoon.github.io/2023/02/05/hongong-s-04/index.html">
<meta property="og:site_name" content="Jonghwan Yoon">
<meta property="og:description" content="SQL에서 사용되는 테이블 생성, 제약조건, 뷰에 대해 정리하는 글입니다.  목차  데이터베이스와 SQL SQL 미리 맛보기 SQL 기본 문법 SQL 고급 문법 테이블과 뷰 ⬅ 테이블 생성, 제약조건, 뷰 인덱스 스토어드 프로시져 SQL과 파이썬 연결    테이블 생성 테이블 생성하는 과정을 실습해보겠습니다. 우선 구조를 구상하는 것이 먼저이고, data">
<meta property="og:locale">
<meta property="article:published_time" content="2023-02-05T11:08:56.000Z">
<meta property="article:modified_time" content="2023-07-03T12:13:12.679Z">
<meta property="article:author" content="Jonghwan Yoon">
<meta property="article:tag" content="혼공학습단">
<meta property="article:tag" content="혼공">
<meta property="article:tag" content="혼공S">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://jonghwanyoon.github.io/2023/02/05/hongong-s-04/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Jonghwan Yoon" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 6.3.0"></head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://jonghwanyoon.github.io/" target="_blank">
          <img class="img-circle img-rotate" src="/images/blue_whale.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">jonghwanyoon</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Seoul, South Korea</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      <!-- 
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/jonghwanyoon" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/jonghwan-yoon" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
    </ul>
 -->
    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%B1%85/">책</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%B1%85/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%8B%9C%EB%A6%AC%EC%A6%88/">혼자 공부하는 시리즈</a><span class="category-list-count">2</span></li></ul></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Hexo/" style="font-size: 14px;">Hexo</a> <a href="/tags/%EB%A6%AC%EB%B7%B0/" style="font-size: 13px;">리뷰</a> <a href="/tags/%EC%B1%85/" style="font-size: 14px;">책</a> <a href="/tags/%EC%BD%94%EB%94%A9-%EC%9D%B8%ED%84%B0%EB%B7%B0/" style="font-size: 13px;">코딩 인터뷰</a> <a href="/tags/%ED%98%BC%EA%B3%B5/" style="font-size: 14px;">혼공</a> <a href="/tags/%ED%98%BC%EA%B3%B5C/" style="font-size: 13px;">혼공C</a> <a href="/tags/%ED%98%BC%EA%B3%B5S/" style="font-size: 13px;">혼공S</a> <a href="/tags/%ED%98%BC%EA%B3%B5%EB%A8%B8%EC%8B%A0/" style="font-size: 13px;">혼공머신</a> <a href="/tags/%ED%98%BC%EA%B3%B5%ED%95%99%EC%8A%B5%EB%8B%A8/" style="font-size: 14px;">혼공학습단</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%EC%B1%85/">책</a>
              </p>
              <p class="item-title">
                <a href="/2023/07/13/book-cracking-the-coding-interview/" class="title">(책) 코딩 인터뷰 완전분석</a>
              </p>
              <p class="item-date">
                <time datetime="2023-07-13T11:50:00.000Z" itemprop="datePublished">2023-07-13</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Hexo/">Hexo</a>
              </p>
              <p class="item-title">
                <a href="/2023/07/03/you-must-add-nojekyll-in-hexo/" class="title">Hexo에서 Github pages의 deploy fail시 .nojekyll을 추가하자.</a>
              </p>
              <p class="item-date">
                <time datetime="2023-07-03T13:29:13.000Z" itemprop="datePublished">2023-07-03</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%EC%B1%85/">책</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/%EC%B1%85/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%8B%9C%EB%A6%AC%EC%A6%88/">혼자 공부하는 시리즈</a>
              </p>
              <p class="item-title">
                <a href="/2023/07/03/hongong-10th-summary/" class="title">(책) 혼자 공부하는 C언어 정리</a>
              </p>
              <p class="item-date">
                <time datetime="2023-07-02T15:00:00.000Z" itemprop="datePublished">2023-07-03</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%EC%B1%85/">책</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/%EC%B1%85/%ED%98%BC%EC%9E%90-%EA%B3%B5%EB%B6%80%ED%95%98%EB%8A%94-%EC%8B%9C%EB%A6%AC%EC%A6%88/">혼자 공부하는 시리즈</a>
              </p>
              <p class="item-title">
                <a href="/2023/03/09/hongong-9th-summary/" class="title">(책) 혼자 공부하는 ML/DL, SQL 정리</a>
              </p>
              <p class="item-date">
                <time datetime="2023-03-09T11:54:43.000Z" itemprop="datePublished">2023-03-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Hexo/">Hexo</a>
              </p>
              <p class="item-title">
                <a href="/2023/01/11/hexo_embed_html/" class="title">Hexo에서 HTML 파일을 Markdown에 삽입하기</a>
              </p>
              <p class="item-date">
                <time datetime="2023-01-11T13:15:35.000Z" itemprop="datePublished">2023-01-11</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-hongong-s-04" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      SQL | 테이블 생성, 제약조건, 뷰
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2023/02/05/hongong-s-04/" class="article-date">
	  <time datetime="2023-02-05T11:08:56.000Z" itemprop="datePublished">2023-02-05</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/%ED%98%BC%EA%B3%B5/" rel="tag">혼공</a>, <a class="article-tag-link-link" href="/tags/%ED%98%BC%EA%B3%B5S/" rel="tag">혼공S</a>, <a class="article-tag-link-link" href="/tags/%ED%98%BC%EA%B3%B5%ED%95%99%EC%8A%B5%EB%8B%A8/" rel="tag">혼공학습단</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2023/02/05/hongong-s-04/#comments" class="article-comment-link">Comments</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p><br><br></p>
<p>SQL에서 사용되는 테이블 생성, 제약조건, 뷰에 대해 정리하는 글입니다.</p>
<br>
<p><strong>목차</strong></p>
<ol>
<li>데이터베이스와 SQL</li>
<li>SQL 미리 맛보기</li>
<li>SQL 기본 문법</li>
<li>SQL 고급 문법</li>
<li><strong>테이블과 뷰</strong> ⬅ 테이블 생성, 제약조건, 뷰</li>
<li>인덱스</li>
<li>스토어드 프로시져</li>
<li>SQL과 파이썬 연결</li>
</ol>
<br>
<h1 id="테이블-생성"><a class="markdownIt-Anchor" href="#테이블-생성"></a> 테이블 생성</h1>
<p>테이블 생성하는 과정을 실습해보겠습니다. 우선 구조를 구상하는 것이 먼저이고, data type을 적합하게 지정해줘야합니다.</p>
<p>네이버 쇼핑몰 데이터베이스를 만든다고 해봅시다. <strong>회원 테이블</strong>이 있을 것이고, 제품에 대한 <strong>구매 테이블</strong>이 있어야합니다.</p>
<p>지난 글과 유사하네요. 구상을 했다고 하고, 만들어볼 테이블의 구조는 다음과 같습니다.</p>
<br>
<center>
<table>
<thead>
<tr>
<th>열 이름</th>
<th>영문 이름</th>
<th>데이터 형식</th>
<th>널 허용 여부</th>
<th>기타</th>
</tr>
</thead>
<tbody>
<tr>
<td>아이디</td>
<td>mem_id</td>
<td>CHAR(8)</td>
<td>Yes</td>
<td>Primary Key</td>
</tr>
<tr>
<td>회원이름</td>
<td>mem_name</td>
<td>VARCHAR(10)</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>인원 수</td>
<td>men_number</td>
<td>TINYINT</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>주소</td>
<td>addr</td>
<td>CHAR(2)</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>연락처 국번</td>
<td>phone1</td>
<td>CHAR(3)</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>전화번호</td>
<td>phone2</td>
<td>CHAR(8)</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>평균 키</td>
<td>height</td>
<td>TNIYINT</td>
<td>No</td>
<td>UNSIGNED</td>
</tr>
<tr>
<td>데뷔 일자</td>
<td>debut_date</td>
<td>DATE</td>
<td>No</td>
<td></td>
</tr>
</tbody>
</table>
<p>회원 테이블 (member)</p>
<br>
<table>
<thead>
<tr>
<th>열 이름</th>
<th>영문 이름</th>
<th>데이터 형식</th>
<th>널 허용 여부</th>
<th>기타</th>
</tr>
</thead>
<tbody>
<tr>
<td>순번</td>
<td>num</td>
<td>INT</td>
<td>Yes</td>
<td>PK, 자동 증가</td>
</tr>
<tr>
<td>아이디</td>
<td>mem_id</td>
<td>CHAR(8)</td>
<td>Yes</td>
<td>Foreign Key</td>
</tr>
<tr>
<td>제품 이름</td>
<td>prod_name</td>
<td>CHAR(6)</td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td>분류</td>
<td>group_name</td>
<td>CHAR(4)</td>
<td>No</td>
<td></td>
</tr>
<tr>
<td>가격</td>
<td>price</td>
<td>INT</td>
<td>Yes</td>
<td>UNSIGNED</td>
</tr>
<tr>
<td>수량</td>
<td>amount</td>
<td>SMALLINT</td>
<td>Yes</td>
<td>UNSIGNED</td>
</tr>
</tbody>
</table>
<p>구매 테이블 (buy)</p>
</center>
<br>
<h3 id="데이터베이스-생성하기"><a class="markdownIt-Anchor" href="#데이터베이스-생성하기"></a> 데이터베이스 생성하기</h3>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE naver_db;</span><br></pre></td></tr></table></figure>
<h3 id="테이블-생성하기"><a class="markdownIt-Anchor" href="#테이블-생성하기"></a> 테이블 생성하기</h3>
<p>구상한 테이블을 생성해봅시다. 이전에 배운 <code>CREATE TABLE</code> 예약어를 사용합니다.</p>
<br>
<p><strong>회원 테이블 (member)</strong></p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">USE naver_db;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    (mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">     mem_name   <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     mem_number TINYINT <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     addr       <span class="type">CHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     phone1     <span class="type">CHAR</span>(<span class="number">3</span>) <span class="keyword">NULL</span>,</span><br><span class="line">     phone2     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NULL</span>,</span><br><span class="line">     height     TINYINT UNSIGNED <span class="keyword">NULL</span>,</span><br><span class="line">     debut_date <span class="type">DATE</span> <span class="keyword">NULL</span></span><br><span class="line">     );</span><br></pre></td></tr></table></figure>
<br>
<p><strong>구매 테이블 (buy)</strong></p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> buy</span><br><span class="line">    (num        <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">     mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     prod_name  <span class="type">CHAR</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     group_name <span class="type">CHAR</span>(<span class="number">4</span>) <span class="keyword">NULL</span>,</span><br><span class="line">     price      <span class="type">INT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     amount     <span class="type">SMALLINT</span> UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     <span class="keyword">FOREIGN</span> KEY(mem_id) <span class="keyword">REFERENCES</span> <span class="keyword">member</span>(mem_id)</span><br><span class="line">     );</span><br></pre></td></tr></table></figure>
<br>
<ul>
<li><code>FOREIGN KEY</code> 예약어로 둘을 지정한다면 지정한 다른 테이블에도 값이 존재해야합니다.</li>
</ul>
<blockquote>
<p>AUTO_INCREMENT가 지정되면 1부터 자동으로 1씩 증가합니다.<br>⭐️ AUTO_INCREMENT가 지정된 열은 PK나 UNIQUE로 지정되어야 합니다!</p>
</blockquote>
<h3 id="데이터-입력"><a class="markdownIt-Anchor" href="#데이터-입력"></a> 데이터 입력</h3>
<p>회원 테이블에 3건을 입력해보겠습니다. 이전에 배운 <code>INSERT</code> 예약어를 사용합니다.</p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">member</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;TWC&#x27;</span>, <span class="string">&#x27;트와이스&#x27;</span>, <span class="number">9</span>, <span class="string">&#x27;서울&#x27;</span>, <span class="string">&#x27;02&#x27;</span>, <span class="string">&#x27;11111111&#x27;</span>, <span class="number">167</span>, <span class="string">&#x27;2015-10-19&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">member</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;BLK&#x27;</span>, <span class="string">&#x27;블랙핑크&#x27;</span>, <span class="number">4</span>, <span class="string">&#x27;경남&#x27;</span>, <span class="string">&#x27;055&#x27;</span>, <span class="string">&#x27;22222222&#x27;</span>, <span class="number">163</span>, <span class="string">&#x27;2015-8-8&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">member</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;WMN&#x27;</span>, <span class="string">&#x27;여자친구&#x27;</span>, <span class="number">6</span>, <span class="string">&#x27;경기&#x27;</span>, <span class="string">&#x27;031&#x27;</span>, <span class="string">&#x27;33333333&#x27;</span>, <span class="number">166</span>, <span class="string">&#x27;2015-1-15&#x27;</span>);</span><br></pre></td></tr></table></figure>
<br>
<p><strong>결과</strong></p>
<img src=/images/hongong_s_04_mission.png>
<p><br><br></p>
<p>이번에는 구매 테이블에 3건을 입력해보겠습니다.</p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> buy <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>, <span class="string">&#x27;BLK&#x27;</span>, <span class="string">&#x27;지갑&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">30</span>, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> buy <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>, <span class="string">&#x27;BLK&#x27;</span>, <span class="string">&#x27;맥북프로&#x27;</span>, <span class="string">&#x27;디지털&#x27;</span>, <span class="number">1000</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> buy <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>, <span class="string">&#x27;APN&#x27;</span>, <span class="string">&#x27;아이폰&#x27;</span>, <span class="string">&#x27;디지털&#x27;</span>, <span class="number">200</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<br>
<p><strong>💣여기서 오류가 발생합니다</strong></p>
<blockquote>
<p>Error Code: 1452. Cannot add or update a child row: a foreign key constraint fails (<code>naver_db</code>.<code>buy</code>, CONSTRAINT <code>buy_ibfk_1</code> FOREIGN KEY (<code>mem_id</code>) REFERENCES <code>member</code> (<code>mem_id</code>))</p>
</blockquote>
<p>왜 일까요? 구매 테이블을 생성할 때, <code>FOREIGN KEY</code>를 지정하였습니다. 구매 테이블에 입력한 'APN’은 <code>member</code> 테이블에 없는 <code>mem_id</code>라서 에러가 발생합니다.</p>
<br>
<p>테이블 생성은 여기까지입니다.</p>
<p>이번에는 제약조건에 대해 확인해보겠습니다.</p>
<br>
<h1 id="제약조건supconstraintsup"><a class="markdownIt-Anchor" href="#제약조건supconstraintsup"></a> 제약조건<sup>Constraint</sup></h1>
<p>제약조건이란 테이블 구조에 따른 조건입니다. 제약조건을 설정하면 다음의 장점이 있습니다.</p>
<ul>
<li>데이터의 유효성</li>
<li>데이터의 일관성</li>
<li>데이터의 안정성</li>
</ul>
<br>
<p>대표적인 제약조건에 대해 알아보겠습니다.</p>
<ul>
<li>PRIMARY KEY</li>
<li>FOREIGN KEY</li>
<li>UNIQUE</li>
<li>CHECK</li>
<li>DEFAULT 정의</li>
<li>NULL 허용여부</li>
</ul>
<br>
<h3 id="primary-key"><a class="markdownIt-Anchor" href="#primary-key"></a> PRIMARY KEY</h3>
<ul>
<li>중복될 수 없습니다.</li>
<li>NULL이 허용되지 않습니다.</li>
<li>테이블 당 1개만 가질 수 있습니다.</li>
<li>PK - FK로 연결되어 있다면, FK가 존재하는 테이블을 삭제해야만 PK 가 존재하는 테이블을 삭제할 수 있습니다.</li>
<li><code>CREATE TABLE</code> 마지막 줄에 <code>PRIMARY KEY(열 이름)</code> 으로 지정할 수도 있습니다.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    (mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     ...</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (mem_id)</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ALTER TABLE</code> 구문으로도 추가할 수 있습니다. 이미 존재하는 테이블에 추가로 제약조건을 추가할 수 있습니다.</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    (mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">     ...</span><br><span class="line">     <span class="keyword">PRIMARY</span> KEY (mem_id)</span><br><span class="line">    );</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span></span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY(mem_id);</span><br></pre></td></tr></table></figure>
<br>
<h3 id="foreign-key"><a class="markdownIt-Anchor" href="#foreign-key"></a> FOREIGN KEY</h3>
<ul>
<li>두 테이블 사이의 관계를 연결하고 데이터의 무결성을 보장합니다.</li>
<li>다른 테이블의 PK나 UNIQUE와 연결되어야 합니다.</li>
<li>PK가 있는 테이블을 <strong>기준 테이블</strong>이라 부르고, FK가 있는 테이블은 <strong>참조 테이블</strong> 이라 합니다.</li>
<li><strong>기준 테이블</strong>의 PK의 데이터는 일괄적으로 변경될 수 없습니다. <strong>참조 테이블</strong>에 데이터가 남게 되기 때문이죠.</li>
</ul>
<blockquote>
<p>위의 구매 테이블 (buy)를 생성할 때 실습하였으므로 생성 예시는 넘어가겠습니다.</p>
</blockquote>
<p>그러면 두 테이블의 데이터를 바꿔줄 수 없는 걸까요?</p>
<p>기준 테이블과 참조 테이블에 있는 데이터를 동시에 바꿔주는 예약어는 <code>ON UPDATE CASCADE</code>와 <code>ON DELETE CASCADE</code> 입니다. 테이블을 생성할 때, 제약조건과 함께 사용할 수 있습니다.</p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> buy</span><br><span class="line">    (...);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> buy</span><br><span class="line">    <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span></span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY(mem_id) <span class="keyword">REFERENCES</span> <span class="keyword">member</span>(mem_id)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE;</span><br></pre></td></tr></table></figure>
<br>
<p>이렇게 지정해주면 기준 테이블에서 데이터가 변동되어도 참조 테이블도 같이 바뀝니다.</p>
<br>
<h3 id="기타-제약조건"><a class="markdownIt-Anchor" href="#기타-제약조건"></a> 기타 제약조건</h3>
<p><strong>UNIQUE</strong></p>
<p>이름처럼 중복되지 않는 유이한 값을 입력해야 하는 조건입니다.</p>
<br>
<p><strong>CHECK</strong></p>
<ul>
<li>입력한 데이터를 점검하는 기능입니다.</li>
<li>어떤 열에 값이 음수가 되지 않게 하거나, 어떤 열은 Categorical로 정해진 값만 입력하게 할 수 있습니다.</li>
</ul>
<p>예시 1)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    (mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">     height     TINYINT UNSIGNED <span class="keyword">NULL</span> <span class="keyword">CHECK</span> (height <span class="operator">&gt;=</span> <span class="number">100</span>),</span><br><span class="line">     debut_date <span class="type">DATE</span> <span class="keyword">NULL</span></span><br><span class="line">     );</span><br></pre></td></tr></table></figure>
<br>
<p>예시 2)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span></span><br><span class="line">    <span class="keyword">CHECK</span> (phone1 <span class="keyword">IN</span> (<span class="string">&#x27;02&#x27;</span>, <span class="string">&#x27;031&#x27;</span>, <span class="string">&#x27;032&#x27;</span>, <span class="string">&#x27;054&#x27;</span>, <span class="string">&#x27;061&#x27;</span>));</span><br></pre></td></tr></table></figure>
<br>
<p><strong>Default 정의</strong></p>
<p>default를 지정했다면 값을 입력할 때, default를 입력해서 자동으로 그 값이 채워지게 할 수 있습니다.</p>
<p>예시는 다음과 같습니다</p>
<p>테이블 생성</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">member</span></span><br><span class="line">    (mem_id     <span class="type">CHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">     height     TINYINT UNSIGNED <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">160</span></span><br><span class="line">     );</span><br></pre></td></tr></table></figure>
<br>
<p>입력</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">member</span> <span class="keyword">VALUES</span>(<span class="string">&#x27;WMN&#x27;</span>, <span class="keyword">default</span>)</span><br></pre></td></tr></table></figure>
<br>
<p><strong>NULL 허용 여부</strong></p>
<p>이 부분은 계속 실습에 사용하였으므로 넘어가겠습니다.</p>
<h1 id="뷰supviewsup"><a class="markdownIt-Anchor" href="#뷰supviewsup"></a> 뷰<sup>View</sup></h1>
<ul>
<li>데이터베이스의 주요 개체 중 하나입니다.</li>
<li>SELECT 문으로 사용자에게 일부의 테이블만 보여주는 기능을 합니다.</li>
<li><strong>단순 뷰</strong> 와 <strong>복합 뷰</strong>로 나뉘어 집니다.</li>
</ul>
<p>기본 구조는 다음과 같습니다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 뷰_이름</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">    <span class="keyword">SELECT</span> 문;</span><br></pre></td></tr></table></figure>
<br>
<p>이게 전부입니다. <code>SELECT</code>에는 보여주고 싶은 테이블을 넣어주면, <strong>뷰_이름</strong>으로 테이블처럼 조회할 수 있습니다</p>
<br>
<p>뷰를 사용하면 다음의 장점이 있습니다</p>
<ul>
<li>보안에 도움이 됩니다. ⭐️</li>
<li>복잡한 SQL을 단순하게 만들 수 있습니다.<br>예를 들어, 여러 JOIN을 한 테이블의 일정 열과 형태를 변경해 새로 생성한 열을 뷰로 지정하면 유용하게 확인할 수 있을 것입니다.</li>
</ul>
<p><strong>참고</strong></p>
<ul>
<li>뷰를 조회할 열에 공백이 있으면 백틱(```)을 사용해 구분해야 합니다.</li>
<li>뷰의 수정은 <code>ALTER VIEW</code>를 사용합니다. (기존에 있는 뷰를 새로 만든다고 생각하면 됩니다)</li>
<li>뷰의 삭제는 <code>DROP VIEW</code>를 사용합니다.</li>
<li>뷰를 생성할 때, <code>CREATE OR REPLACE VIEW</code>를 사용하면 기존에 뷰가 있어도 덮어 쓸수 있습니다.<br><code>CREATE VIEW</code>만 사용하면 에러가 나옵니다.</li>
<li><code>SHOW CREATE VIEW</code>으로 뷰의 소스코드를 확인할 수 있습니다.</li>
<li>뷰가 일부의 열만 보여주고 다른 열에 제약조건이 있다면 입력이 불가능할 수 있습니다.</li>
<li>뷰를 생성할때 설정된 값의 범위에 대해 <code>WITH CHECK OPTION</code>을 끝에 추가해주면, 범위에 해당하지 않는 값을 입력되지 않도록 할 수 있습니다.</li>
</ul>
<br>
<p>뷰의 생성</p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> v_height167</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">member</span> <span class="keyword">WHERE</span> height <span class="operator">&gt;=</span> <span class="number">167</span></span><br><span class="line">             <span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION;</span><br></pre></td></tr></table></figure>
<p><br><br></p>
<p><code>CHECK</code>의 범위를 벗어나는 데이터 입력</p>
<br>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> v_height167 <span class="keyword">VALUES</span>(<span class="string">&#x27;TOB&#x27;</span>, <span class="string">&#x27;텔레토비&#x27;</span>, <span class="number">4</span>, <span class="string">&#x27;영국&#x27;</span>, <span class="keyword">NULL</span>, <span class="keyword">NULL</span>, <span class="number">140</span>, <span class="string">&#x27;1995-01-01&#x27;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>💣 결과는 에러가 나타납니다</p>
</blockquote>
<p><br><br></p>
<p>여기서 중간 점검을 해보겠습니다.</p>
<p>기존에 뷰가 있으면 덮어쓰고, 없으면 새로 생성하는 SQL문을 작성하려 합니다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[                ] 뷰_이름</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">    <span class="keyword">SELECT</span> 문;</span><br></pre></td></tr></table></figure>
<p>1️⃣ <code>CREATE AND REPLACE VIEW</code><br />
2️⃣ <code>CREATE OR REPLACE VIEW</code><br />
3️⃣ <code>CREATE AND OVERWRITE VIEW</code><br />
4️⃣ <code>CREATE OR OVERWRITE VIEW</code></p>
<p><br><br></p>
<p>…</p>
<p><br><br></p>
<p>정답은 2️⃣ <code>CREATE OR REPLACE VIEW</code> 입니다. OVERWRITE라는 예약어는 없습니다.</p>
<p><br><br></p>
<p>오늘은 SQL의 테이블 생성, 제약조건과 데이터베이스 핵심 개체중 하나인 뷰에 대해 정리하였습니다.</p>
<p>다음에는 인덱스에 대해 정리해보겠습니다.</p>
<p>읽어주셔서 감사합니다~👋</p>
<p><br><br><br><br></p>
<!-- flag of hidden posts -->
      
    </div>
    <div class="article-footer">
      <!-- <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://jonghwanyoon.github.io/2023/02/05/hongong-s-04/" title="SQL | 테이블 생성, 제약조건, 뷰" target="_blank" rel="external">https://jonghwanyoon.github.io/2023/02/05/hongong-s-04/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote> -->
<!-- 

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://jonghwanyoon.github.io/" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/blue_whale.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://jonghwanyoon.github.io/" target="_blank"><span class="text-dark">jonghwanyoon</span><small class="ml-1x"></small></a></h3>
        <div></div>
      </div>
    </figure>
  </div>
</div>
 -->

    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/jonghwanyoon" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://www.linkedin.com/in/jonghwan-yoon" target="_blank" title="Linkedin" data-toggle=tooltip data-placement=top><i class="icon icon-linkedin"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        &copy; 2023 Jonghwan Yoon
        
        <div class="publishby">
        	<!-- Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>. -->
            Theme by <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   
    
    <script defer>
    var disqus_config = function () {
        
            this.page.url = 'https://jonghwanyoon.github.io/2023/02/05/hongong-s-04/';
        
        this.page.identifier = 'hongong-s-04';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'wg-yoon' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>






    <script defer type="text/javascript">
(function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-140384355-2', 'auto');
ga('send', 'pageview');

</script>



</body>
</html>